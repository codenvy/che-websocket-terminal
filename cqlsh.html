<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico">
    <title>PlanetCassandra VM Manager</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
  <div class="container-fluid" style="padding: 20px;">
    <div class="row">
      <div class="col-md-2">
        <a href="http://www.planetcassandra.com/">
        <img src="images/planetcassandra.png" border="0" style="padding: 1em;"/>
        </a>
      </div>
      <div class="col-md-10">
        <h2>Planet Cassandra VM 2.0.7</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6" id="cqlshTab"></div>
      <div class="col-md-6" id="bashTab"></div>
    </div>
  </div>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="term.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  var mkTerm = function (target, port) {
    var sock = new WebSocket("ws://" + window.location.hostname + ":" + port + "/pty");
    sock.onerror = function (e) { console.log("shell socket error", e); };
    sock.onopen = function(e) {
      var term = new Terminal({
        cols: 80,
        rows: 30,
        useStyle: true,
        screenKeys: true
      });

      term.open(document.getElementById(target))

      term.on('title', function(title) { document.title = title; });

      term.on('data', function(data) { sock.send(btoa(data)); });

      sock.onmessage = function(msg) { term.write(atob(msg.data)); };
   };
   return sock;
  };

  // start the terminals
  //var bashSocket = mkTerm("bashTab", 80);
  var cqlSocket = mkTerm("cqlshTab", 9001);

  // enable tabs
  $('#tabs a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
  });
});
</script>
</body>
</html>

